"use strict";var cov_2nci2zot8n=function(){var path="/home/mxaba/Desktop/My-Meal-App-develop/server/src/controllers/userControllers.js";var hash="5be0feeba2ed9b400612782ee63aef3c96d803c0";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/mxaba/Desktop/My-Meal-App-develop/server/src/controllers/userControllers.js",statementMap:{"0":{start:{line:3,column:77},end:{line:3,column:175}},"1":{start:{line:3,column:94},end:{line:3,column:107}},"2":{start:{line:3,column:121},end:{line:3,column:131}},"3":{start:{line:3,column:151},end:{line:3,column:165}},"4":{start:{line:3,column:166},end:{line:3,column:173}},"5":{start:{line:3,column:176},end:{line:3,column:263}},"6":{start:{line:3,column:193},end:{line:3,column:208}},"7":{start:{line:3,column:218},end:{line:3,column:261}},"8":{start:{line:5,column:33},end:{line:5,column:387}},"9":{start:{line:5,column:65},end:{line:5,column:69}},"10":{start:{line:5,column:78},end:{line:5,column:87}},"11":{start:{line:5,column:89},end:{line:5,column:384}},"12":{start:{line:5,column:147},end:{line:5,column:167}},"13":{start:{line:5,column:193},end:{line:5,column:264}},"14":{start:{line:5,column:290},end:{line:5,column:360}},"15":{start:{line:5,column:363},end:{line:5,column:380}},"16":{start:{line:7,column:50},end:{line:7,column:151}},"17":{start:{line:7,column:92},end:{line:7,column:149}},"18":{start:{line:9,column:44},end:{line:9,column:315}},"19":{start:{line:9,column:57},end:{line:9,column:58}},"20":{start:{line:9,column:102},end:{line:9,column:110}},"21":{start:{line:9,column:112},end:{line:9,column:167}},"22":{start:{line:9,column:168},end:{line:9,column:199}},"23":{start:{line:9,column:200},end:{line:9,column:254}},"24":{start:{line:9,column:227},end:{line:9,column:254}},"25":{start:{line:9,column:255},end:{line:9,column:313}},"26":{start:{line:11,column:62},end:{line:11,column:131}},"27":{start:{line:11,column:78},end:{line:11,column:131}},"28":{start:{line:11,column:132},end:{line:11,column:193}},"29":{start:{line:11,column:149},end:{line:11,column:193}},"30":{start:{line:11,column:194},end:{line:11,column:213}},"31":{start:{line:13,column:10},end:{line:13,column:33}},"32":{start:{line:15,column:13},end:{line:15,column:30}},"33":{start:{line:18,column:13},end:{line:18,column:40}},"34":{start:{line:22,column:0},end:{line:182,column:3}},"35":{start:{line:24,column:4},end:{line:24,column:42}},"36":{start:{line:27,column:2},end:{line:179,column:6}},"37":{start:{line:30,column:26},end:{line:86,column:9}},"38":{start:{line:35,column:8},end:{line:85,column:37}},"39":{start:{line:36,column:10},end:{line:84,column:11}},"40":{start:{line:37,column:12},end:{line:83,column:13}},"41":{start:{line:39,column:16},end:{line:39,column:34}},"42":{start:{line:40,column:16},end:{line:40,column:116}},"43":{start:{line:41,column:16},end:{line:41,column:34}},"44":{start:{line:42,column:16},end:{line:42,column:49}},"45":{start:{line:45,column:16},end:{line:45,column:37}},"46":{start:{line:46,column:16},end:{line:46,column:34}},"47":{start:{line:47,column:16},end:{line:51,column:19}},"48":{start:{line:54,column:16},end:{line:54,column:37}},"49":{start:{line:55,column:16},end:{line:59,column:18}},"50":{start:{line:60,column:16},end:{line:64,column:19}},"51":{start:{line:65,column:16},end:{line:70,column:20}},"52":{start:{line:73,column:16},end:{line:73,column:35}},"53":{start:{line:74,column:16},end:{line:74,column:51}},"54":{start:{line:75,column:16},end:{line:78,column:20}},"55":{start:{line:82,column:16},end:{line:82,column:39}},"56":{start:{line:89,column:8},end:{line:89,column:52}},"57":{start:{line:92,column:6},end:{line:92,column:26}},"58":{start:{line:97,column:23},end:{line:171,column:9}},"59":{start:{line:102,column:8},end:{line:170,column:38}},"60":{start:{line:103,column:10},end:{line:169,column:11}},"61":{start:{line:104,column:12},end:{line:168,column:13}},"62":{start:{line:106,column:16},end:{line:106,column:35}},"63":{start:{line:107,column:16},end:{line:107,column:96}},"64":{start:{line:108,column:16},end:{line:108,column:35}},"65":{start:{line:109,column:16},end:{line:113,column:19}},"66":{start:{line:116,column:16},end:{line:116,column:38}},"67":{start:{line:118,column:16},end:{line:121,column:17}},"68":{start:{line:119,column:18},end:{line:119,column:37}},"69":{start:{line:120,column:18},end:{line:120,column:24}},"70":{start:{line:123,column:16},end:{line:123,column:71}},"71":{start:{line:126,column:16},end:{line:126,column:35}},"72":{start:{line:127,column:16},end:{line:127,column:63}},"73":{start:{line:130,column:16},end:{line:130,column:40}},"74":{start:{line:132,column:16},end:{line:135,column:17}},"75":{start:{line:133,column:18},end:{line:133,column:38}},"76":{start:{line:134,column:18},end:{line:134,column:24}},"77":{start:{line:137,column:16},end:{line:137,column:70}},"78":{start:{line:140,column:16},end:{line:144,column:18}},"79":{start:{line:145,column:16},end:{line:149,column:19}},"80":{start:{line:150,column:16},end:{line:155,column:20}},"81":{start:{line:158,column:16},end:{line:158,column:36}},"82":{start:{line:159,column:16},end:{line:159,column:53}},"83":{start:{line:160,column:16},end:{line:163,column:20}},"84":{start:{line:167,column:16},end:{line:167,column:40}},"85":{start:{line:174,column:8},end:{line:174,column:49}},"86":{start:{line:177,column:6},end:{line:177,column:23}},"87":{start:{line:181,column:2},end:{line:181,column:24}},"88":{start:{line:184,column:0},end:{line:184,column:32}}},fnMap:{"0":{name:"asyncGeneratorStep",decl:{start:{line:3,column:9},end:{line:3,column:27}},loc:{start:{line:3,column:75},end:{line:3,column:265}},line:3},"1":{name:"_asyncToGenerator",decl:{start:{line:5,column:9},end:{line:5,column:26}},loc:{start:{line:5,column:31},end:{line:5,column:389}},line:5},"2":{name:"(anonymous_2)",decl:{start:{line:5,column:40},end:{line:5,column:41}},loc:{start:{line:5,column:52},end:{line:5,column:386}},line:5},"3":{name:"(anonymous_3)",decl:{start:{line:5,column:108},end:{line:5,column:109}},loc:{start:{line:5,column:135},end:{line:5,column:382}},line:5},"4":{name:"_next",decl:{start:{line:5,column:178},end:{line:5,column:183}},loc:{start:{line:5,column:191},end:{line:5,column:266}},line:5},"5":{name:"_throw",decl:{start:{line:5,column:276},end:{line:5,column:282}},loc:{start:{line:5,column:288},end:{line:5,column:362}},line:5},"6":{name:"_classCallCheck",decl:{start:{line:7,column:9},end:{line:7,column:24}},loc:{start:{line:7,column:48},end:{line:7,column:153}},line:7},"7":{name:"_defineProperties",decl:{start:{line:9,column:9},end:{line:9,column:26}},loc:{start:{line:9,column:42},end:{line:9,column:317}},line:9},"8":{name:"_createClass",decl:{start:{line:11,column:9},end:{line:11,column:21}},loc:{start:{line:11,column:60},end:{line:11,column:215}},line:11},"9":{name:"(anonymous_9)",decl:{start:{line:22,column:0},end:{line:22,column:1}},loc:{start:{line:22,column:12},end:{line:182,column:1}},line:22},"10":{name:"UserController",decl:{start:{line:23,column:11},end:{line:23,column:25}},loc:{start:{line:23,column:28},end:{line:25,column:3}},line:23},"11":{name:"(anonymous_11)",decl:{start:{line:29,column:11},end:{line:29,column:12}},loc:{start:{line:29,column:23},end:{line:93,column:5}},line:29},"12":{name:"_callee",decl:{start:{line:32,column:39},end:{line:32,column:46}},loc:{start:{line:32,column:57},end:{line:86,column:7}},line:32},"13":{name:"_callee$",decl:{start:{line:35,column:48},end:{line:35,column:56}},loc:{start:{line:35,column:67},end:{line:85,column:9}},line:35},"14":{name:"registerUser",decl:{start:{line:88,column:15},end:{line:88,column:27}},loc:{start:{line:88,column:37},end:{line:90,column:7}},line:88},"15":{name:"(anonymous_15)",decl:{start:{line:96,column:11},end:{line:96,column:12}},loc:{start:{line:96,column:23},end:{line:178,column:5}},line:96},"16":{name:"_callee2",decl:{start:{line:99,column:39},end:{line:99,column:47}},loc:{start:{line:99,column:58},end:{line:171,column:7}},line:99},"17":{name:"_callee2$",decl:{start:{line:102,column:48},end:{line:102,column:57}},loc:{start:{line:102,column:69},end:{line:170,column:9}},line:102},"18":{name:"loginUser",decl:{start:{line:173,column:15},end:{line:173,column:24}},loc:{start:{line:173,column:35},end:{line:175,column:7}},line:173}},branchMap:{"0":{loc:{start:{line:3,column:176},end:{line:3,column:263}},type:"if",locations:[{start:{line:3,column:176},end:{line:3,column:263}},{start:{line:3,column:176},end:{line:3,column:263}}],line:3},"1":{loc:{start:{line:7,column:50},end:{line:7,column:151}},type:"if",locations:[{start:{line:7,column:50},end:{line:7,column:151}},{start:{line:7,column:50},end:{line:7,column:151}}],line:7},"2":{loc:{start:{line:9,column:136},end:{line:9,column:166}},type:"binary-expr",locations:[{start:{line:9,column:136},end:{line:9,column:157}},{start:{line:9,column:161},end:{line:9,column:166}}],line:9},"3":{loc:{start:{line:9,column:200},end:{line:9,column:254}},type:"if",locations:[{start:{line:9,column:200},end:{line:9,column:254}},{start:{line:9,column:200},end:{line:9,column:254}}],line:9},"4":{loc:{start:{line:11,column:62},end:{line:11,column:131}},type:"if",locations:[{start:{line:11,column:62},end:{line:11,column:131}},{start:{line:11,column:62},end:{line:11,column:131}}],line:11},"5":{loc:{start:{line:11,column:132},end:{line:11,column:193}},type:"if",locations:[{start:{line:11,column:132},end:{line:11,column:193}},{start:{line:11,column:132},end:{line:11,column:193}}],line:11},"6":{loc:{start:{line:37,column:12},end:{line:83,column:13}},type:"switch",locations:[{start:{line:38,column:14},end:{line:42,column:49}},{start:{line:44,column:14},end:{line:51,column:19}},{start:{line:53,column:14},end:{line:70,column:20}},{start:{line:72,column:14},end:{line:78,column:20}},{start:{line:80,column:14},end:{line:80,column:22}},{start:{line:81,column:14},end:{line:82,column:39}}],line:37},"7":{loc:{start:{line:104,column:12},end:{line:168,column:13}},type:"switch",locations:[{start:{line:105,column:14},end:{line:113,column:19}},{start:{line:115,column:14},end:{line:123,column:71}},{start:{line:125,column:14},end:{line:127,column:63}},{start:{line:129,column:14},end:{line:137,column:70}},{start:{line:139,column:14},end:{line:155,column:20}},{start:{line:157,column:14},end:{line:163,column:20}},{start:{line:165,column:14},end:{line:165,column:22}},{start:{line:166,column:14},end:{line:167,column:40}}],line:104},"8":{loc:{start:{line:118,column:16},end:{line:121,column:17}},type:"if",locations:[{start:{line:118,column:16},end:{line:121,column:17}},{start:{line:118,column:16},end:{line:121,column:17}}],line:118},"9":{loc:{start:{line:132,column:16},end:{line:135,column:17}},type:"if",locations:[{start:{line:132,column:16},end:{line:135,column:17}},{start:{line:132,column:16},end:{line:135,column:17}}],line:132}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0,0,0,0],"7":[0,0,0,0,0,0,0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){cov_2nci2zot8n.f[0]++;cov_2nci2zot8n.s[0]++;try{var info=(cov_2nci2zot8n.s[1]++,gen[key](arg));var value=(cov_2nci2zot8n.s[2]++,info.value);}catch(error){cov_2nci2zot8n.s[3]++;reject(error);cov_2nci2zot8n.s[4]++;return;}cov_2nci2zot8n.s[5]++;if(info.done){cov_2nci2zot8n.b[0][0]++;cov_2nci2zot8n.s[6]++;resolve(value);}else{cov_2nci2zot8n.b[0][1]++;cov_2nci2zot8n.s[7]++;Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){cov_2nci2zot8n.f[1]++;cov_2nci2zot8n.s[8]++;return function(){cov_2nci2zot8n.f[2]++;var self=(cov_2nci2zot8n.s[9]++,this),args=(cov_2nci2zot8n.s[10]++,arguments);cov_2nci2zot8n.s[11]++;return new Promise(function(resolve,reject){cov_2nci2zot8n.f[3]++;var gen=(cov_2nci2zot8n.s[12]++,fn.apply(self,args));function _next(value){cov_2nci2zot8n.f[4]++;cov_2nci2zot8n.s[13]++;asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value);}function _throw(err){cov_2nci2zot8n.f[5]++;cov_2nci2zot8n.s[14]++;asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err);}cov_2nci2zot8n.s[15]++;_next(undefined);});};}function _classCallCheck(instance,Constructor){cov_2nci2zot8n.f[6]++;cov_2nci2zot8n.s[16]++;if(!(instance instanceof Constructor)){cov_2nci2zot8n.b[1][0]++;cov_2nci2zot8n.s[17]++;throw new TypeError("Cannot call a class as a function");}else{cov_2nci2zot8n.b[1][1]++;}}function _defineProperties(target,props){cov_2nci2zot8n.f[7]++;cov_2nci2zot8n.s[18]++;for(var i=(cov_2nci2zot8n.s[19]++,0);i<props.length;i++){var descriptor=(cov_2nci2zot8n.s[20]++,props[i]);cov_2nci2zot8n.s[21]++;descriptor.enumerable=(cov_2nci2zot8n.b[2][0]++,descriptor.enumerable)||(cov_2nci2zot8n.b[2][1]++,false);cov_2nci2zot8n.s[22]++;descriptor.configurable=true;cov_2nci2zot8n.s[23]++;if("value"in descriptor){cov_2nci2zot8n.b[3][0]++;cov_2nci2zot8n.s[24]++;descriptor.writable=true;}else{cov_2nci2zot8n.b[3][1]++;}cov_2nci2zot8n.s[25]++;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){cov_2nci2zot8n.f[8]++;cov_2nci2zot8n.s[26]++;if(protoProps){cov_2nci2zot8n.b[4][0]++;cov_2nci2zot8n.s[27]++;_defineProperties(Constructor.prototype,protoProps);}else{cov_2nci2zot8n.b[4][1]++;}cov_2nci2zot8n.s[28]++;if(staticProps){cov_2nci2zot8n.b[5][0]++;cov_2nci2zot8n.s[29]++;_defineProperties(Constructor,staticProps);}else{cov_2nci2zot8n.b[5][1]++;}cov_2nci2zot8n.s[30]++;return Constructor;}var jwt=(cov_2nci2zot8n.s[31]++,require('jsonwebtoken'));var bcrypt=(cov_2nci2zot8n.s[32]++,require('bcrypt'));//var User = require'../models/user';
var secret=(cov_2nci2zot8n.s[33]++,require("../db/jwt_secret"));var UserController=(/*#__PURE__*/cov_2nci2zot8n.s[34]++,function(){cov_2nci2zot8n.f[9]++;function UserController(){cov_2nci2zot8n.f[10]++;cov_2nci2zot8n.s[35]++;_classCallCheck(this,UserController);}cov_2nci2zot8n.s[36]++;_createClass(UserController,null,[{key:"registerUser",value:function(){cov_2nci2zot8n.f[11]++;var _registerUser=(cov_2nci2zot8n.s[37]++,_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(req,res){cov_2nci2zot8n.f[12]++;var _req$body,name,email,password,hash,user,safeUser,jwtToken;cov_2nci2zot8n.s[38]++;return regeneratorRuntime.wrap(function _callee$(_context){cov_2nci2zot8n.f[13]++;cov_2nci2zot8n.s[39]++;while(1){cov_2nci2zot8n.s[40]++;switch(_context.prev=_context.next){case 0:cov_2nci2zot8n.b[6][0]++;cov_2nci2zot8n.s[41]++;_context.prev=0;cov_2nci2zot8n.s[42]++;_req$body=req.body,name=_req$body.name,email=_req$body.email,password=_req$body.password;cov_2nci2zot8n.s[43]++;_context.next=4;cov_2nci2zot8n.s[44]++;return bcrypt.hash(password,10);case 4:cov_2nci2zot8n.b[6][1]++;cov_2nci2zot8n.s[45]++;hash=_context.sent;cov_2nci2zot8n.s[46]++;_context.next=7;cov_2nci2zot8n.s[47]++;return User.create({name:name,email:email,password:hash});case 7:cov_2nci2zot8n.b[6][2]++;cov_2nci2zot8n.s[48]++;user=_context.sent;cov_2nci2zot8n.s[49]++;safeUser={id:user.id,name:user.name,email:user.email};cov_2nci2zot8n.s[50]++;jwtToken=jwt.sign({user:safeUser},secret,{expiresIn:86400});cov_2nci2zot8n.s[51]++;return _context.abrupt("return",res.status(201).json({status:'success',message:'User Registered',token:"Bearer ".concat(jwtToken),user:safeUser}));case 13:cov_2nci2zot8n.b[6][3]++;cov_2nci2zot8n.s[52]++;_context.prev=13;cov_2nci2zot8n.s[53]++;_context.t0=_context["catch"](0);cov_2nci2zot8n.s[54]++;return _context.abrupt("return",res.status(500).json({status:'error',message:_context.t0.message}));case 16:cov_2nci2zot8n.b[6][4]++;case"end":cov_2nci2zot8n.b[6][5]++;cov_2nci2zot8n.s[55]++;return _context.stop();}}},_callee,this,[[0,13]]);})));function registerUser(_x,_x2){cov_2nci2zot8n.f[14]++;cov_2nci2zot8n.s[56]++;return _registerUser.apply(this,arguments);}cov_2nci2zot8n.s[57]++;return registerUser;}()},{key:"loginUser",value:function(){cov_2nci2zot8n.f[15]++;var _loginUser=(cov_2nci2zot8n.s[58]++,_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(req,res){cov_2nci2zot8n.f[16]++;var _req$body2,email,password,user,result,safeUser,jwtToken;cov_2nci2zot8n.s[59]++;return regeneratorRuntime.wrap(function _callee2$(_context2){cov_2nci2zot8n.f[17]++;cov_2nci2zot8n.s[60]++;while(1){cov_2nci2zot8n.s[61]++;switch(_context2.prev=_context2.next){case 0:cov_2nci2zot8n.b[7][0]++;cov_2nci2zot8n.s[62]++;_context2.prev=0;cov_2nci2zot8n.s[63]++;_req$body2=req.body,email=_req$body2.email,password=_req$body2.password;cov_2nci2zot8n.s[64]++;_context2.next=4;cov_2nci2zot8n.s[65]++;return User.findOne({where:{email:email}});case 4:cov_2nci2zot8n.b[7][1]++;cov_2nci2zot8n.s[66]++;user=_context2.sent;cov_2nci2zot8n.s[67]++;if(user){cov_2nci2zot8n.b[8][0]++;cov_2nci2zot8n.s[68]++;_context2.next=7;cov_2nci2zot8n.s[69]++;break;}else{cov_2nci2zot8n.b[8][1]++;}cov_2nci2zot8n.s[70]++;throw new Error('User with that email does not exist');case 7:cov_2nci2zot8n.b[7][2]++;cov_2nci2zot8n.s[71]++;_context2.next=9;cov_2nci2zot8n.s[72]++;return bcrypt.compare(password,user.password);case 9:cov_2nci2zot8n.b[7][3]++;cov_2nci2zot8n.s[73]++;result=_context2.sent;cov_2nci2zot8n.s[74]++;if(result){cov_2nci2zot8n.b[9][0]++;cov_2nci2zot8n.s[75]++;_context2.next=12;cov_2nci2zot8n.s[76]++;break;}else{cov_2nci2zot8n.b[9][1]++;}cov_2nci2zot8n.s[77]++;throw new Error("Password doesn't match our records");case 12:cov_2nci2zot8n.b[7][4]++;cov_2nci2zot8n.s[78]++;safeUser={id:user.id,name:user.name,email:user.email};cov_2nci2zot8n.s[79]++;jwtToken=jwt.sign({user:safeUser},secret,{expiresIn:86400});cov_2nci2zot8n.s[80]++;return _context2.abrupt("return",res.status(200).json({status:'success',message:'User Logged In',token:"Bearer ".concat(jwtToken),user:safeUser}));case 17:cov_2nci2zot8n.b[7][5]++;cov_2nci2zot8n.s[81]++;_context2.prev=17;cov_2nci2zot8n.s[82]++;_context2.t0=_context2["catch"](0);cov_2nci2zot8n.s[83]++;return _context2.abrupt("return",res.status(500).json({status:'error',message:_context2.t0.message}));case 20:cov_2nci2zot8n.b[7][6]++;case"end":cov_2nci2zot8n.b[7][7]++;cov_2nci2zot8n.s[84]++;return _context2.stop();}}},_callee2,this,[[0,17]]);})));function loginUser(_x3,_x4){cov_2nci2zot8n.f[18]++;cov_2nci2zot8n.s[85]++;return _loginUser.apply(this,arguments);}cov_2nci2zot8n.s[86]++;return loginUser;}()}]);cov_2nci2zot8n.s[87]++;return UserController;}());cov_2nci2zot8n.s[88]++;module.exports=UserController;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJDb250cm9sbGVycy5qcyJdLCJuYW1lcyI6WyJqd3QiLCJyZXF1aXJlIiwiYmNyeXB0Iiwic2VjcmV0IiwiVXNlckNvbnRyb2xsZXIiLCJyZXEiLCJyZXMiLCJib2R5IiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJoYXNoIiwiVXNlciIsImNyZWF0ZSIsInVzZXIiLCJzYWZlVXNlciIsImlkIiwiand0VG9rZW4iLCJzaWduIiwiZXhwaXJlc0luIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ0b2tlbiIsImZpbmRPbmUiLCJ3aGVyZSIsIkVycm9yIiwiY29tcGFyZSIsInJlc3VsdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLEdBQUcsR0FBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBakI7O0FBQ0EsSUFBSUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFwQixDLENBQ0E7OztBQUNBLElBQUlFLE1BQU0sR0FBR0YsT0FBTyxDQUFDLGtCQUFELENBQXBCOztJQUVNRyxjOzs7Ozs7Ozs7Ozs7K0NBQ3dCQyxHLEVBQUtDLEc7Ozs7Ozs7OzRCQUVXRCxHQUFHLENBQUNFLEksRUFBOUJDLEksYUFBQUEsSSxFQUFNQyxLLGFBQUFBLEssRUFBT0MsUSxhQUFBQSxROzt1QkFDRlIsTUFBTSxDQUFDUyxJQUFQLENBQVlELFFBQVosRUFBc0IsRUFBdEIsQzs7O0FBQWJDLGdCQUFBQSxJOzt1QkFDYUMsSUFBSSxDQUFDQyxNQUFMLENBQVk7QUFBRUwsa0JBQUFBLElBQUksRUFBSkEsSUFBRjtBQUFRQyxrQkFBQUEsS0FBSyxFQUFMQSxLQUFSO0FBQWVDLGtCQUFBQSxRQUFRLEVBQUVDO0FBQXpCLGlCQUFaLEM7OztBQUFiRyxnQkFBQUEsSTtBQUNBQyxnQkFBQUEsUSxHQUFXO0FBQ2JDLGtCQUFBQSxFQUFFLEVBQUVGLElBQUksQ0FBQ0UsRUFESTtBQUViUixrQkFBQUEsSUFBSSxFQUFFTSxJQUFJLENBQUNOLElBRkU7QUFHYkMsa0JBQUFBLEtBQUssRUFBRUssSUFBSSxDQUFDTDtBQUhDLGlCO0FBTVhRLGdCQUFBQSxRLEdBQVdqQixHQUFHLENBQUNrQixJQUFKLENBQVM7QUFBRUosa0JBQUFBLElBQUksRUFBRUM7QUFBUixpQkFBVCxFQUE2QlosTUFBN0IsRUFBcUM7QUFDbERnQixrQkFBQUEsU0FBUyxFQUFFO0FBRHVDLGlCQUFyQyxDO2lEQUdWYixHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUN4QkQsa0JBQUFBLE1BQU0sRUFBRSxTQURnQjtBQUV4QkUsa0JBQUFBLE9BQU8sRUFBRSxpQkFGZTtBQUd4QkMsa0JBQUFBLEtBQUssbUJBQVlOLFFBQVosQ0FIbUI7QUFJeEJILGtCQUFBQSxJQUFJLEVBQUVDO0FBSmtCLGlCQUFyQixDOzs7OztpREFPQVQsR0FBRyxDQUFDYyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDeEJELGtCQUFBQSxNQUFNLEVBQUUsT0FEZ0I7QUFFeEJFLGtCQUFBQSxPQUFPLEVBQUUsWUFBSUE7QUFGVyxpQkFBckIsQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2dEQU9RakIsRyxFQUFLQyxHOzs7Ozs7Ozs2QkFFUUQsR0FBRyxDQUFDRSxJLEVBQXhCRSxLLGNBQUFBLEssRUFBT0MsUSxjQUFBQSxROzt1QkFDSUUsSUFBSSxDQUFDWSxPQUFMLENBQWE7QUFBRUMsa0JBQUFBLEtBQUssRUFBRTtBQUFFaEIsb0JBQUFBLEtBQUssRUFBTEE7QUFBRjtBQUFULGlCQUFiLEM7OztBQUFiSyxnQkFBQUEsSTs7b0JBQ0RBLEk7Ozs7O3NCQUNLLElBQUlZLEtBQUosQ0FBVSxxQ0FBVixDOzs7O3VCQUVXeEIsTUFBTSxDQUFDeUIsT0FBUCxDQUFlakIsUUFBZixFQUF5QkksSUFBSSxDQUFDSixRQUE5QixDOzs7QUFBZmtCLGdCQUFBQSxNOztvQkFDREEsTTs7Ozs7c0JBQ0ssSUFBSUYsS0FBSixDQUFVLG9DQUFWLEM7OztBQUVKWCxnQkFBQUEsUSxHQUFXO0FBQ2JDLGtCQUFBQSxFQUFFLEVBQUVGLElBQUksQ0FBQ0UsRUFESTtBQUViUixrQkFBQUEsSUFBSSxFQUFFTSxJQUFJLENBQUNOLElBRkU7QUFHYkMsa0JBQUFBLEtBQUssRUFBRUssSUFBSSxDQUFDTDtBQUhDLGlCO0FBTVhRLGdCQUFBQSxRLEdBQVdqQixHQUFHLENBQUNrQixJQUFKLENBQVM7QUFBRUosa0JBQUFBLElBQUksRUFBRUM7QUFBUixpQkFBVCxFQUE2QlosTUFBN0IsRUFBcUM7QUFDbERnQixrQkFBQUEsU0FBUyxFQUFFO0FBRHVDLGlCQUFyQyxDO2tEQUdWYixHQUFHLENBQUNjLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUN4QkQsa0JBQUFBLE1BQU0sRUFBRSxTQURnQjtBQUV4QkUsa0JBQUFBLE9BQU8sRUFBRSxnQkFGZTtBQUd4QkMsa0JBQUFBLEtBQUssbUJBQVlOLFFBQVosQ0FIbUI7QUFJeEJILGtCQUFBQSxJQUFJLEVBQUVDO0FBSmtCLGlCQUFyQixDOzs7OztrREFPQVQsR0FBRyxDQUFDYyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDeEJELGtCQUFBQSxNQUFNLEVBQUUsT0FEZ0I7QUFFeEJFLGtCQUFBQSxPQUFPLEVBQUUsYUFBSUE7QUFGVyxpQkFBckIsQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUW5CTyxNQUFNLENBQUNDLE9BQVAsR0FBaUIxQixjQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS9teGFiYS9EZXNrdG9wL015LU1lYWwtQXBwLWRldmVsb3Avc2VydmVyL3NyYy9jb250cm9sbGVycyIsInNvdXJjZXNDb250ZW50IjpbInZhciBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbnZhciBiY3J5cHQgPSByZXF1aXJlKCdiY3J5cHQnKTtcbi8vdmFyIFVzZXIgPSByZXF1aXJlJy4uL21vZGVscy91c2VyJztcbnZhciBzZWNyZXQgPSByZXF1aXJlKFwiLi4vZGIvand0X3NlY3JldFwiKTtcblxuY2xhc3MgVXNlckNvbnRyb2xsZXIge1xuICAgIHN0YXRpYyBhc3luYyByZWdpc3RlclVzZXIocmVxLCByZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcbiAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTApO1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuY3JlYXRlKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkOiBoYXNoIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2FmZVVzZXIgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsXG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBqd3RUb2tlbiA9IGp3dC5zaWduKHsgdXNlcjogc2FmZVVzZXIgfSwgc2VjcmV0LCB7XG4gICAgICAgICAgICAgICAgZXhwaXJlc0luOiA4NjQwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIFJlZ2lzdGVyZWQnLFxuICAgICAgICAgICAgICAgIHRva2VuOiBgQmVhcmVyICR7and0VG9rZW59YCxcbiAgICAgICAgICAgICAgICB1c2VyOiBzYWZlVXNlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGFzeW5jIGxvZ2luVXNlcihyZXEsIHJlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5O1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHdoZXJlOiB7IGVtYWlsIH0gfSk7XG4gICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgd2l0aCB0aGF0IGVtYWlsIGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhc3N3b3JkIGRvZXNuJ3QgbWF0Y2ggb3VyIHJlY29yZHNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzYWZlVXNlciA9IHtcbiAgICAgICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBqd3RUb2tlbiA9IGp3dC5zaWduKHsgdXNlcjogc2FmZVVzZXIgfSwgc2VjcmV0LCB7XG4gICAgICAgICAgICAgICAgZXhwaXJlc0luOiA4NjQwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIExvZ2dlZCBJbicsXG4gICAgICAgICAgICAgICAgdG9rZW46IGBCZWFyZXIgJHtqd3RUb2tlbn1gLFxuICAgICAgICAgICAgICAgIHVzZXI6IHNhZmVVc2VyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVXNlckNvbnRyb2xsZXI7XG4iXX0=