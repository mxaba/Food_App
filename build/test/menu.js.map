{"version":3,"sources":["../../server/src/test/menu.js"],"names":["assert","chai","expect","use","chaiHTTP","API_PREFIX","userPayload","name","email","password","catererPayload","caterer2Payload","describe","it","done","request","app","get","then","res","to","have","status","equal","body","catch","err","console","log","message","User","findOne","where","user","id","token","jwt","sign","secret","expiresIn","set","Caterer","caterer","isCaterer","create","Meal","price","imageUrl","catererId","meal","mealId","post","send","quantity","data","destroy","after"],"mappings":"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","sourcesContent":["import chai from \"chai\";\nimport chaiHTTP from \"chai-http\";\nimport jwt from \"jsonwebtoken\";\nimport app from \"../app\";\nimport secret from \"../db/jwt_secret\";\nimport Users from \"../db/models/users\";\nimport Caterer from \"../db/models/caterer\";\nimport Meal from \"../db/models/meals\";\n\nconst { assert, expect, use } = chai;\n\nuse(chaiHTTP);\n\nconst API_PREFIX = \"/api/v1\";\n\nconst userPayload = {\n  name: \"Jon Snow\",\n  email: \"bastard@stark.com\",\n  password: \"winterishere\"\n};\n\nconst catererPayload = {\n  name: \"Arya Stark\",\n  email: \"agirl@hasnoface.com\",\n  password: \"bellish:)\"\n};\n\nconst caterer2Payload = {\n  name: \"Arya Stark\",\n  email: \"stark@short.com\",\n  password: \"bellish:)\"\n};\n\n\n\ndescribe(\"User Get all Menus Endpoint Tests\", () => {\n  it(`GET ${API_PREFIX}/menu/ - Fetch All Menus (Unauthorized)`, done => {\n    chai\n      .request(app)\n      .get(`${API_PREFIX}/menu/`)\n      .then(res => {\n        expect(res).to.have.status(401);\n        assert.equal(res.body.status, \"error\");\n        done();\n      })\n      .catch(err => console.log(\"GET /menu/\", err.message));\n  });\n  it(`GET ${API_PREFIX}/menu/ - Fetch All Menus - (User Authorized)`, done => {\n    User.findOne({ where: { email: userPayload.email } }).then(user => {\n      const { id, name, email, } = user;\n      const token = jwt.sign(\n        {\n          user: { id, name, email, }\n        },\n        secret,\n        {\n          expiresIn: 86400\n        }\n      );\n      chai\n        .request(app)\n        .get(`${API_PREFIX}/menu/`)\n        .set(\"Authorization\", `Bearer ${token}`)\n        .then(res => {\n          expect(res).to.have.status(200);\n          assert.equal(res.body.status, \"success\");\n          done();\n        })\n        .catch(err => console.log(\"GET /menu/\", err.message));\n    });\n  });\n});\n\ndescribe(\"Caterer Can Get theit Menu Endpoint Tests\", () => {\n  it(`GET ${API_PREFIX}/menu/caterer - Fetch Menu (Unauthorized)`, done => {\n    chai\n      .request(app)\n      .get(`${API_PREFIX}/menu/caterer`)\n      .then(res => {\n        expect(res).to.have.status(401);\n        assert.equal(res.body.status, \"error\");\n        done();\n      })\n      .catch(err => console.log(\"GET /menu/caterer\", err.message));\n  });\n  it(`GET ${API_PREFIX}/menu/caterer - Fetch Menu - (Caterer Authorized)`, done => {\n    Caterer.findOne({ where: { email: catererPayload.email } }).then(\n      caterer => {\n        const { id, name, email,} = caterer;\n        const token = jwt.sign(\n          {\n            caterer: { id, name, email,},\n            isCaterer: true\n          },\n          secret,\n          {\n            expiresIn: 86400\n          }\n        );\n        chai\n          .request(app)\n          .get(`${API_PREFIX}/menu/caterer`)\n          .set(\"Authorization\", `Bearer ${token}`)\n          .then(res => {\n            expect(res).to.have.status(200);\n            assert.equal(res.body.status, \"success\");\n            done();\n          })\n          .catch(err => console.log(\"GET /menu/caterer\", err.message));\n      }\n    );\n  });\n});\n\ndescribe(\"Caterer Add Meal To Menu Endpoint Tests\", () => {\n  Caterer.create(caterer2Payload)\n    .then(caterer => {\n      return Meal.create({\n        name: \"Fake Food\",\n        price: 700,\n        imageUrl: \"img.png\",\n        catererId: 2\n      });\n    })\n    .then(meal => {\n      const mealId = meal.id;\n      it(`POST ${API_PREFIX}/menu/ - Add Meal Option To Menu(Unauthorized)`, done => {\n        chai\n          .request(app)\n          .post(`${API_PREFIX}/menu/`)\n          .send({\n            mealId,\n            quantity: 2\n          })\n          .then(res => {\n            expect(res).to.have.status(401);\n            assert.equal(res.body.status, \"error\");\n            done();\n          })\n          .catch(err => console.log(\"POST /menu/\", err.message));\n      });\n      it(`POST ${API_PREFIX}/menu/ - Add Meal Option To Menu - (Validation Test)`, done => {\n        Caterer.findOne({ where: { email: caterer2Payload.email } }).then(\n          caterer => {\n            const token = jwt.sign(\n              {\n                caterer: {\n                  id: caterer.id,\n                  name: caterer.name,\n                  email: caterer.email\n                },\n                isCaterer: true\n              },\n              secret,\n              {\n                expiresIn: 86400\n              }\n            );\n            chai\n              .request(app)\n              .post(`${API_PREFIX}/menu/`)\n              .set(\"Authorization\", `Bearer ${token}`)\n              .send({\n                mealId\n              })\n              .then(res => {\n                expect(res).to.have.status(400);\n                assert.equal(res.body.status, \"error\");\n                done();\n              })\n              .catch(err => console.log(\"POST /menu/\", err.message));\n          }\n        );\n      });\n      it(`POST ${API_PREFIX}/menu/ - Add Meal Option To Menu - (Caterer Can Add Menu Meal)`, done => {\n        Caterer.findOne({ where: { email: caterer2Payload.email } })\n          .then(caterer => {\n            const token = jwt.sign(\n              {\n                caterer: {\n                  id: caterer.id,\n                  name: caterer.name,\n                  email: caterer.email,\n                },\n                isCaterer: true\n              },\n              secret,\n              {\n                expiresIn: 86400\n              }\n            );\n            chai\n              .request(app)\n              .post(`${API_PREFIX}/menu/`)\n              .set(\"Authorization\", `Bearer ${token}`)\n              .send({\n                mealId,\n                quantity: 2\n              })\n              .then(res => {\n                expect(res).to.have.status(200);\n                assert.equal(res.body.status, \"success\");\n                done();\n              })\n              .catch(err => console.log(\"POST /menu/\", err.message));\n          })\n          .catch(err => console.log(err.message));\n      });\n      it(`POST ${API_PREFIX}/menu/ - Add Meal Option To Menu - (Caterer Can Update Menu Meal)`, done => {\n        Caterer.findOne({ where: { email: caterer2Payload.email } }).then(\n          caterer => {\n            const token = jwt.sign(\n              {\n                caterer: {\n                  id: caterer.id,\n                  name: caterer.name,\n                  email: caterer.email,\n                },\n                isCaterer: true\n              },\n              secret,\n              {\n                expiresIn: 86400\n              }\n            );\n            chai\n              .request(app)\n              .post(`${API_PREFIX}/menu/`)\n              .set(\"Authorization\", `Bearer ${token}`)\n              .send({\n                mealId,\n                quantity: 2\n              })\n              .then(res => {\n                expect(res).to.have.status(200);\n                assert.equal(res.body.status, \"success\");\n                assert.equal(res.body.data[0].quantity, 4);\n                Meal.destroy({ where: { id: mealId } }).then(() => {\n                  done();\n                });\n              })\n              .catch(err => console.log(\"POST /menu/\", err.message));\n          }\n        );\n      });\n    })\n    .catch(err => console.log(err.message));\n});\n\nafter(done => {\n  User.destroy({ where: { email: userPayload.email } })\n    .then(async () => {\n      await Caterer.destroy({ where: { email: caterer2Payload.email } });\n      return Caterer.destroy({ where: { email: catererPayload.email } });\n    })\n    .then(() => {\n      done();\n    });\n});\n"],"file":"menu.js"}